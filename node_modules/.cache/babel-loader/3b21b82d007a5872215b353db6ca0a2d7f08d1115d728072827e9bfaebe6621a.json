{"ast":null,"code":"import{useCallback,useEffect,useState}from\"react\";import classes from\"./Comments.module.css\";import NewCommentForm from\"./NewCommentForm\";import{useParams}from\"react-router-dom/cjs/react-router-dom.min\";import useHttp from\"../hooks/use-http\";import{getAllComments}from\"../lib/api\";import LoadingSpinner from\"../UI/LoadingSpinner\";import CommentsList from\"./CommentsList\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Comments=()=>{const[isAddingComment,setIsAddingComment]=useState(false);const params=useParams();const{quoteId}=params;const{sendRequest,status,data:loadedComments}=useHttp(getAllComments);useEffect(()=>{sendRequest(quoteId);},[quoteId,sendRequest]);const startAddCommentHandler=()=>{setIsAddingComment(true);};const addedCommentHandler=useCallback(()=>{sendRequest(quoteId);},[sendRequest,quoteId]);let comments;if(status===\"pending\"){comments=/*#__PURE__*/_jsx(\"div\",{className:\"centered\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})});}if(status===\"completed\"&&loadedComments&&loadedComments.length>0){comments=/*#__PURE__*/_jsx(CommentsList,{comments:loadedComments});}if(status===\"completed\"&&(!loadedComments||loadedComments.length===0)){comments=/*#__PURE__*/_jsx(\"p\",{className:\"centered\",children:\"No comments were added yet!\"});}return/*#__PURE__*/_jsxs(\"section\",{className:classes.comments,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Comments\"}),!isAddingComment&&/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:startAddCommentHandler,children:\"Add a Comment\"}),isAddingComment&&/*#__PURE__*/_jsx(NewCommentForm,{quoteId:quoteId,onAddedComment:addedCommentHandler}),comments]});};export default Comments;","map":{"version":3,"names":["useCallback","useEffect","useState","classes","NewCommentForm","useParams","useHttp","getAllComments","LoadingSpinner","CommentsList","jsx","_jsx","jsxs","_jsxs","Comments","isAddingComment","setIsAddingComment","params","quoteId","sendRequest","status","data","loadedComments","startAddCommentHandler","addedCommentHandler","comments","className","children","length","onClick","onAddedComment"],"sources":["C:/Users/User/Projects/test/src/components/comments/Comments.js"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\n\nimport classes from \"./Comments.module.css\";\nimport NewCommentForm from \"./NewCommentForm\";\nimport { useParams } from \"react-router-dom/cjs/react-router-dom.min\";\nimport useHttp from \"../hooks/use-http\";\nimport { getAllComments } from \"../lib/api\";\nimport LoadingSpinner from \"../UI/LoadingSpinner\";\nimport CommentsList from \"./CommentsList\";\nconst Comments = () => {\n  const [isAddingComment, setIsAddingComment] = useState(false);\n  const params = useParams();\n  const { quoteId } = params;\n  const { sendRequest, status, data: loadedComments } = useHttp(getAllComments);\n\n  useEffect(() => {\n    sendRequest(quoteId);\n  }, [quoteId, sendRequest]);\n\n  const startAddCommentHandler = () => {\n    setIsAddingComment(true);\n  };\n\n  const addedCommentHandler = useCallback(() => {\n    sendRequest(quoteId);\n  },[sendRequest, quoteId]);\n\n  let comments;\n\n  if (status === \"pending\") {\n    comments = (\n      <div className=\"centered\">\n        <LoadingSpinner />\n      </div>\n    );\n  }\n\n  if (status === \"completed\" && loadedComments && loadedComments.length > 0) {\n    comments = <CommentsList comments={loadedComments} />;\n  }\n\n  if (\n    status === \"completed\" &&\n    (!loadedComments || loadedComments.length === 0)\n  ) {\n    comments = <p className=\"centered\">No comments were added yet!</p>;\n  }\n  return (\n    <section className={classes.comments}>\n      <h2>User Comments</h2>\n      {!isAddingComment && (\n        <button className=\"btn\" onClick={startAddCommentHandler}>\n          Add a Comment\n        </button>\n      )}\n      {isAddingComment && (\n        <NewCommentForm\n          quoteId={quoteId}\n          onAddedComment={addedCommentHandler}\n        />\n      )}\n      {comments}\n    </section>\n  );\n};\n\nexport default Comments;\n"],"mappings":"AAAA,OAASA,WAAW,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAExD,MAAO,CAAAC,OAAO,KAAM,uBAAuB,CAC3C,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,OAASC,SAAS,KAAQ,2CAA2C,CACrE,MAAO,CAAAC,OAAO,KAAM,mBAAmB,CACvC,OAASC,cAAc,KAAQ,YAAY,CAC3C,MAAO,CAAAC,cAAc,KAAM,sBAAsB,CACjD,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAC1C,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,eAAe,CAAEC,kBAAkB,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAAAe,MAAM,CAAGZ,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAEa,OAAQ,CAAC,CAAGD,MAAM,CAC1B,KAAM,CAAEE,WAAW,CAAEC,MAAM,CAAEC,IAAI,CAAEC,cAAe,CAAC,CAAGhB,OAAO,CAACC,cAAc,CAAC,CAE7EN,SAAS,CAAC,IAAM,CACdkB,WAAW,CAACD,OAAO,CAAC,CACtB,CAAC,CAAE,CAACA,OAAO,CAAEC,WAAW,CAAC,CAAC,CAE1B,KAAM,CAAAI,sBAAsB,CAAGA,CAAA,GAAM,CACnCP,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,CAED,KAAM,CAAAQ,mBAAmB,CAAGxB,WAAW,CAAC,IAAM,CAC5CmB,WAAW,CAACD,OAAO,CAAC,CACtB,CAAC,CAAC,CAACC,WAAW,CAAED,OAAO,CAAC,CAAC,CAEzB,GAAI,CAAAO,QAAQ,CAEZ,GAAIL,MAAM,GAAK,SAAS,CAAE,CACxBK,QAAQ,cACNd,IAAA,QAAKe,SAAS,CAAC,UAAU,CAAAC,QAAA,cACvBhB,IAAA,CAACH,cAAc,GAAE,CAAC,CACf,CACN,CACH,CAEA,GAAIY,MAAM,GAAK,WAAW,EAAIE,cAAc,EAAIA,cAAc,CAACM,MAAM,CAAG,CAAC,CAAE,CACzEH,QAAQ,cAAGd,IAAA,CAACF,YAAY,EAACgB,QAAQ,CAAEH,cAAe,CAAE,CAAC,CACvD,CAEA,GACEF,MAAM,GAAK,WAAW,GACrB,CAACE,cAAc,EAAIA,cAAc,CAACM,MAAM,GAAK,CAAC,CAAC,CAChD,CACAH,QAAQ,cAAGd,IAAA,MAAGe,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAC,6BAA2B,CAAG,CAAC,CACpE,CACA,mBACEd,KAAA,YAASa,SAAS,CAAEvB,OAAO,CAACsB,QAAS,CAAAE,QAAA,eACnChB,IAAA,OAAAgB,QAAA,CAAI,eAAa,CAAI,CAAC,CACrB,CAACZ,eAAe,eACfJ,IAAA,WAAQe,SAAS,CAAC,KAAK,CAACG,OAAO,CAAEN,sBAAuB,CAAAI,QAAA,CAAC,eAEzD,CAAQ,CACT,CACAZ,eAAe,eACdJ,IAAA,CAACP,cAAc,EACbc,OAAO,CAAEA,OAAQ,CACjBY,cAAc,CAAEN,mBAAoB,CACrC,CACF,CACAC,QAAQ,EACF,CAAC,CAEd,CAAC,CAED,cAAe,CAAAX,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}